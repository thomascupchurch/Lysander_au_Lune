<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Tree Builder</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header style="background:#fff;color:#222;padding:1.2em 2em 1.2em 2em;margin-bottom:2em;letter-spacing:0.03em;font-size:1.5em;font-weight:bold;">
        <div style="display:flex;justify-content:center;align-items:center;height:100%;">
            <img src="/static/LSI_Power_T_Combo_Logo.png" alt="Header Logo" style="height:144px;max-width:90vw;object-fit:contain;">
        </div>
    </header>
    <div id="edit-node-saved" style="display:none;position:fixed;z-index:2100;left:50%;top:10vh;transform:translateX(-50%);background:#4BB543;color:#fff;padding:1em 2em;border-radius:6px;font-size:1.2em;box-shadow:0 2px 8px rgba(0,0,0,0.15);">Saved!</div>
    <!-- Modal for editing node details -->
    <div id="edit-node-modal" style="display:none;position:fixed;z-index:2000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;">
        <div style="background:#fff;padding:2em 2em 1em 2em;border-radius:8px;min-width:320px;max-width:90vw;position:relative;">
            <span id="edit-node-modal-close" style="position:absolute;top:0.5em;right:1em;font-size:2em;color:#333;cursor:pointer;">&times;</span>
            <form id="edit-node-form">
                <h3>Edit Node</h3>
                <label>Name:<br><input type="text" id="edit-node-name" required></label><br><br>
                <label>Description:<br><input type="text" id="edit-node-desc"></label><br><br>
                <label>Planned Start Date:<br><input type="date" id="edit-node-planned-start"></label><br><br>
                <label>Estimated Duration:<br><input type="text" id="edit-node-estimated-duration" placeholder="e.g. 5 days, 2 weeks"></label><br><br>
                <label>Deadline:<br><input type="date" id="edit-node-deadline"></label><br><br>
                <label>Status:<br><select id="edit-node-status">
                    <option>Not Started</option>
                    <option>In Progress</option>
                    <option>Done</option>
                </select></label><br><br>
                <label>Dependencies:<br><input type="text" id="edit-node-deps"></label><br><br>
                <label>Milestones:<br><input type="text" id="edit-node-milestones"></label><br><br>
                <label>Classification:<br><select id="edit-node-level">
                    <option>Project</option>
                    <option>Phase</option>
                    <option>Feature</option>
                    <option>Item</option>
                </select></label><br><br>
                <label><input type="checkbox" id="edit-node-external"> External (otherwise Internal)</label><br><br>
                <button type="submit">Save</button>
            </form>
        </div>
    </div>

    <form id="add-project-form">
        <input type="text" id="project-name" placeholder="Project Name" required>
        <button type="submit">Add Project</button>
    </form>
    <button id="save-tree">Save Tree</button>
    <button id="load-tree">Load Tree</button>
    <button id="toggle-gantt">Gantt Chart View</button>
    <form id="upload-form" enctype="multipart/form-data" style="margin-top:2em;">
        <label for="project-select">Select Project:</label>
        <select id="project-select" name="project_id"></select>
        <label for="file-input">Upload File:</label>
        <input type="file" id="file-input" name="file">
        <button type="submit">Upload</button>
    </form>
    <div id="upload-status"></div>
    <div id="file-list"></div>
    <div id="file-gallery" style="margin-top:1em;"></div>
    <!-- Modal for full-size file viewing -->
    <div id="file-modal" style="display:none;position:fixed;z-index:1000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;">
        <span id="file-modal-close" style="position:absolute;top:2vh;right:3vw;font-size:2em;color:#fff;cursor:pointer;">&times;</span>
        <div id="file-modal-content" style="max-width:90vw;max-height:90vh;"></div>
    </div>
    <div id="tree-headers" style="display:flex;gap:2em;margin-bottom:0.5em;font-weight:bold;color:#fff;">
        <span style="flex:1;">Project</span>
        <span style="flex:1;">Phase</span>
        <span style="flex:1;">Feature</span>
        <span style="flex:1;">Item</span>
    </div>
    <div id="tree-container" style="background:#fff;padding:2em 2em 2em 2em;border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,0.07);margin-bottom:2em;">
        <ul id="project-tree" style="background:transparent;">
        <!-- Project nodes will appear here -->
        </ul>
    </div>
    <div id="gantt-layer-controls" style="display:none;margin-bottom:1em;"></div>
    <div id="gantt-container" style="display:none;margin-top:2em;background:#fff;"></div>
    <script src="/static/tree.js"></script>
</body>
</html>
